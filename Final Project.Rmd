---
title: "Optimal song properties for popularity"
author: "Group 3"
date: "December 4th, 2024"
output: pdf_document
---

List your group members, including their student numbers, here:

-   Justin Lee (169085217)
-   Raiyan Junaid (169099497)
-   Dylan Plut ()
-   Seamus Chai ()

# Libraries

```{r}
library(tidyverse)
library(tidymodels)
library(devtools)
library(data.table)
```

```{r}
folder_path <- "Raw Data Files"
csv_files <- list.files(path = folder_path, pattern = "\\.csv$", full.names = TRUE)
data_list <- lapply(csv_files, fread)
data_list
```

# Tidying Data

```{r}
# Joining the datasets
all_data <- map(csv_files, read_and_convert)
combined_data <- bind_rows(all_data)

read_and_convert <- function(file) {
  df <- read_csv(file, col_types = cols(.default = "c"))
  df |> mutate(across(everything(), as.character))
}

#numeric_cols <- c("Duration (ms)", "Popularity", "Danceability", "Energy", "Key", "Loudness", 
#                  "Mode", "Speechiness", "Acousticness", "Instrumentalness", "Liveness", 
#                  "Valence", "Tempo", "Time Signature")


combined_data <- combined_data |>
  mutate(across(all_of(numeric_cols), as.numeric),
         `Added At` = as.POSIXct(`Added At`, format = "%Y-%m-%d %H:%M:%S")) |>
  select(-`Added By`, -`Added At`)

combined_data
```
